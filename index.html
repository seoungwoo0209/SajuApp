<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>사주 카페 v1.3</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <div class="logo">☯</div>
      <div>
        <div class="title">사주 카페</div>
        <div class="subtitle">v1.3 · 절기/대운/점수엔진(transition+penalty)</div>
      </div>
    </div>

    <div id="badgesTop" class="badges"></div>
  </header>

  <main class="container">
    <section class="panel">
      <h2>입력</h2>

      <div class="form-grid">
        <label>
          <span>이름(옵션)</span>
          <input id="name" type="text" placeholder="예: 추승우" />
        </label>

        <label>
          <span>생년월일(양력)</span>
          <input id="birthDate" type="date" />
        </label>

        <label>
          <span>출생시각(필수)</span>
          <input id="birthTime" type="time" />
        </label>

        <label>
          <span>성별</span>
          <select id="gender">
            <option value="M">남</option>
            <option value="F">여</option>
          </select>
        </label>
      </div>

      <div class="actions">
        <button id="btnCalc" class="primary">계산하기</button>
        <button id="btnRunTests" class="ghost">테스트 실행</button>
      </div>

      <div id="errorBox" class="error hidden"></div>
    </section>

    <section class="panel">
      <div class="tabs">
        <button class="tab active" data-tab="tab-saju">사주</button>
        <button class="tab" data-tab="tab-hidden">지장간</button>
        <button class="tab" data-tab="tab-life">인생총운</button>
      </div>

      <div class="tab-body">
        <div id="tab-saju" class="tab-panel active">
          <div class="grid-2">
            <div class="card">
              <h3>4주(연/월/일/시)</h3>
              <div class="pillars">
                <div class="pillar">
                  <div class="label">연주</div>
                  <div id="p-year" class="ganji big">-</div>
                </div>
                <div class="pillar">
                  <div class="label">월주</div>
                  <div id="p-month" class="ganji big">-</div>
                </div>
                <div class="pillar">
                  <div class="label">일주</div>
                  <div id="p-day" class="ganji big">-</div>
                </div>
                <div class="pillar">
                  <div class="label">시주</div>
                  <div id="p-hour" class="ganji big">-</div>
                </div>
              </div>
              <div class="muted">
                일간(일주 천간): <b id="dayMaster">-</b>
              </div>
            </div>

            <div class="card">
              <h3>오행(표면 8글자)</h3>
              <div class="top2">
                <span class="muted">Top2 요약:</span>
                <b id="top2Surface">-</b>
              </div>
              <div id="wuxingSurface" class="bars"></div>
            </div>
          </div>
        </div>

        <div id="tab-hidden" class="tab-panel">
          <div class="grid-2">
            <div class="card">
              <h3>지장간</h3>
              <div id="hiddenList" class="hidden-list"></div>
            </div>
            <div class="card">
              <h3>오행(지장간 포함)</h3>
              <div class="top2">
                <span class="muted">Top2 요약:</span>
                <b id="top2Hidden">-</b>
              </div>
              <div id="wuxingHidden" class="bars"></div>
            </div>
          </div>
        </div>

        <div id="tab-life" class="tab-panel">
          <div class="grid-2">
            <div class="card">
              <h3>인생 요약</h3>
              <div class="life-metrics">
                <div class="metric">
                  <div class="k">LifeScore</div>
                  <div id="lifeScore" class="v">-</div>
                </div>
                <div class="metric">
                  <div class="k">변동성</div>
                  <div id="volatility" class="v">-</div>
                </div>
              </div>
              <div id="globalBadges" class="badges"></div>
              <div id="volText" class="muted"></div>
            </div>

            <div class="card">
              <h3>Top3</h3>
              <div class="top3">
                <div>
                  <div class="k">Best Years</div>
                  <div id="bestYears">-</div>
                </div>
                <div>
                  <div class="k">Worst Years</div>
                  <div id="worstYears">-</div>
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <h3>대운 타임라인</h3>
            <div id="daeunTimeline" class="accordion"></div>
          </div>
        </div>
      </div>
    </section>

    <section class="panel">
      <h2>콘솔/테스트 로그</h2>
      <pre id="log" class="log"></pre>
    </section>
  </main>

  <script src="./tests.js"></script>
  <script src="./script.js"></script>
</body>
</html>